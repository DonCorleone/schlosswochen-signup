{"ast":null,"code":"import { Pipe, NgModule } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\nimport * as ɵngcc0 from '@angular/core';\nlet FormlySelectOptionsPipe = /*#__PURE__*/(() => {\n  class FormlySelectOptionsPipe {\n    /**\n     * @param {?} options\n     * @param {?=} field\n     * @return {?}\n     */\n    transform(options, field) {\n      if (!(options instanceof Observable)) {\n        options = of(options);\n      }\n\n      return (\n        /** @type {?} */\n        options.pipe(map(\n        /**\n        * @param {?} value\n        * @return {?}\n        */\n        value => this.toOptions(value, field || {})))\n      );\n    }\n    /**\n     * @private\n     * @param {?} options\n     * @param {?} field\n     * @return {?}\n     */\n\n\n    toOptions(options, field) {\n      /** @type {?} */\n      const gOptions = [];\n      /** @type {?} */\n\n      const groups = {};\n      /** @type {?} */\n\n      const to = field.templateOptions || {};\n      to._flatOptions = true;\n      options.map(\n      /**\n      * @param {?} option\n      * @return {?}\n      */\n      option => {\n        if (!this.getGroupProp(option, to)) {\n          gOptions.push(this.toOption(option, to));\n        } else {\n          to._flatOptions = false;\n\n          if (!groups[this.getGroupProp(option, to)]) {\n            groups[this.getGroupProp(option, to)] = [];\n            gOptions.push({\n              label: this.getGroupProp(option, to),\n              group: groups[this.getGroupProp(option, to)]\n            });\n          }\n\n          groups[this.getGroupProp(option, to)].push(this.toOption(option, to));\n        }\n      });\n      return gOptions;\n    }\n    /**\n     * @private\n     * @param {?} item\n     * @param {?} to\n     * @return {?}\n     */\n\n\n    toOption(item, to) {\n      return {\n        label: this.getLabelProp(item, to),\n        value: this.getValueProp(item, to),\n        disabled: this.getDisabledProp(item, to) || false\n      };\n    }\n    /**\n     * @private\n     * @param {?} item\n     * @param {?} to\n     * @return {?}\n     */\n\n\n    getLabelProp(item, to) {\n      if (typeof to.labelProp === 'function') {\n        return to.labelProp(item);\n      }\n\n      if (this.shouldUseLegacyOption(item, to)) {\n        console.warn(`NgxFormly: legacy select option '{key, value}' is deprecated since v5.5, use '{value, label}' instead.`);\n        return item.value;\n      }\n\n      return item[to.labelProp || 'label'];\n    }\n    /**\n     * @private\n     * @param {?} item\n     * @param {?} to\n     * @return {?}\n     */\n\n\n    getValueProp(item, to) {\n      if (typeof to.valueProp === 'function') {\n        return to.valueProp(item);\n      }\n\n      if (this.shouldUseLegacyOption(item, to)) {\n        return item.key;\n      }\n\n      return item[to.valueProp || 'value'];\n    }\n    /**\n     * @private\n     * @param {?} item\n     * @param {?} to\n     * @return {?}\n     */\n\n\n    getDisabledProp(item, to) {\n      if (typeof to.disabledProp === 'function') {\n        return to.disabledProp(item);\n      }\n\n      return item[to.disabledProp || 'disabled'];\n    }\n    /**\n     * @private\n     * @param {?} item\n     * @param {?} to\n     * @return {?}\n     */\n\n\n    getGroupProp(item, to) {\n      if (typeof to.groupProp === 'function') {\n        return to.groupProp(item);\n      }\n\n      return item[to.groupProp || 'group'];\n    }\n    /**\n     * @private\n     * @param {?} item\n     * @param {?} to\n     * @return {?}\n     */\n\n\n    shouldUseLegacyOption(item, to) {\n      return !to.valueProp && !to.labelProp && item != null && typeof item === 'object' && 'key' in item && 'value' in item;\n    }\n\n  }\n\n  FormlySelectOptionsPipe.ɵfac = function FormlySelectOptionsPipe_Factory(t) {\n    return new (t || FormlySelectOptionsPipe)();\n  };\n\n  FormlySelectOptionsPipe.ɵpipe = /*@__PURE__*/ɵngcc0.ɵɵdefinePipe({\n    name: \"formlySelectOptions\",\n    type: FormlySelectOptionsPipe,\n    pure: true\n  });\n  return FormlySelectOptionsPipe;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nlet FormlySelectModule = /*#__PURE__*/(() => {\n  class FormlySelectModule {}\n\n  FormlySelectModule.ɵfac = function FormlySelectModule_Factory(t) {\n    return new (t || FormlySelectModule)();\n  };\n\n  FormlySelectModule.ɵmod = /*@__PURE__*/ɵngcc0.ɵɵdefineNgModule({\n    type: FormlySelectModule\n  });\n  FormlySelectModule.ɵinj = /*@__PURE__*/ɵngcc0.ɵɵdefineInjector({});\n  return FormlySelectModule;\n})();\n\n(function () {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(FormlySelectModule, {\n    declarations: [FormlySelectOptionsPipe],\n    exports: [FormlySelectOptionsPipe]\n  });\n})();\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n/**\n * @fileoverview added by tsickle\n * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc\n */\n\n\nexport { FormlySelectModule, FormlySelectOptionsPipe as ɵa }; //# sourceMappingURL=ngx-formly-core-select.js.map","map":null,"metadata":{},"sourceType":"module"}