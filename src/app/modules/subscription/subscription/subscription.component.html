<app-wizard-step
  [title]="title"
  (previousStepClicked)="goToPreviousStep()"
  (nextStepClicked)="goToNextStep()"
>
  <div class="card">
    <div class="card-body">
      <form novalidate [formGroup]="signupForm">
        <div class="form-group row mb-2">
          <app-header></app-header>
        </div>
        <formly-form
          [form]="signupForm"
          [fields]="fields"
          [model]="model"
          [options]="options">
        </formly-form>
          <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="firstNameId">First Name</label>
            <div class="col-md-8">
              <input id="firstNameId"
                    class="form-control"
                    type="text" placeholder="First Name (required)"
                    formControlName="firstName"
                    [ngClass]="{'is-invalid': (signupForm.get('firstName')?.touched || signupForm.get('firstName')?.dirty) && !signupForm.get('firstName')?.valid }" />
              <span class="invalid-feedback">
                <span *ngIf="signupForm.get('firstName')?.errors?.required">
                  Please enter your first name.
                </span>
                <span *ngIf="signupForm.get('firstName')?.errors?.minlength">
                  The first name must be longer than 3 characters.
                </span>
              </span>
            </div>
          </div>

          <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="lastNameId">
              Last Name
            </label>
            <div class="col-md-8">
              <input id="lastNameId"
                    class="form-control"
                    type="text"
                    placeholder="Last Name (required)"
                    formControlName="lastName"
                    [ngClass]="{'is-invalid': (signupForm.get('lastName')?.touched || signupForm.get('lastName')?.dirty) && !signupForm.get('lastName')?.valid }" />
              <span class="invalid-feedback">
                <span *ngIf="signupForm.get('lastName')?.errors?.required">
                  Please enter your last name.
                </span>
                <span *ngIf="signupForm.get('lastName')?.errors?.maxlength">
                  The last name must be less than 50 characters.
                </span>
              </span>
            </div>
          </div>

          <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="phoneId">
                   Phone
            </label>
            <div class="col-md-8">
              <input id="phoneId"
                    class="form-control"
                    type="tel"
                    placeholder="Phone (required)"
                    formControlName="phone"
                    [ngClass]="{'is-invalid': (signupForm.get('phone')?.touched || signupForm.get('phone')?.dirty) &&  !signupForm.get('phone')?.valid }" />
              <span class="invalid-feedback">
                <span *ngIf="signupForm.get('phone')?.errors?.required">
                  Please enter your phone number.
                </span>
              </span>
            </div>
          </div>

          <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="emailId">Email</label>
            <div class="col-md-8">
              <input class="form-control" id="emailId" type="email" placeholder="Email (required)"
                formControlName="email" [ngClass]="{'is-invalid': emailMessage }" />
              <span class="invalid-feedback">
                {{ emailMessage }}
              </span>
            </div>
          </div>

          <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="street1Id">Street Address 1</label>
            <div class="col-md-8">
              <input class="form-control" id="street1Id" type="text" placeholder="Street address" name="street1">
            </div>
          </div>

          <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="street2Id">Street Address 2</label>
            <div class="col-md-8">
              <input class="form-control" id="street2Id" type="text" placeholder="Street address (second line)"
                name="street2">
            </div>
          </div>

          <div class="form-group row mb-2">
            <label class="col-md-2 col-form-label" for="cityId">Zip Code | City</label>
            <div class="col-md-3">
              <input class="form-control" id="zipId" type="number" placeholder="Zip Code" name="zip">
            </div>
            <div class="col-md-5">
              <input class="form-control" id="cityId" type="text" placeholder="City" name="city">
            </div>
          </div>
      </form>
    </div>
  </div>
</app-wizard-step>
<br>ID: {{ id }}
<br>Dirty: {{ signupForm.dirty }}
<br>Touched: {{ signupForm.touched }}
<br>Valid: {{ signupForm.valid }}
<br>Value: {{ signupForm.value | json }}
<br>Address: {{ addresses }};
